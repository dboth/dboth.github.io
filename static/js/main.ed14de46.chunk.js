(this.webpackJsonpkiaragreen=this.webpackJsonpkiaragreen||[]).push([[0],{200:function(e,t,a){},201:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(75),i=a.n(s),l=a(5),r=a(11),o=a.n(r),d=a(76),j=a.n(d),u=function(e,t,a){e/=255,t/=255,a/=255;var n,c,s=Math.max(e,t,a),i=Math.min(e,t,a),l=(s+i)/2;if(s==i)n=c=0;else{var r=s-i;switch(c=l>.5?r/(2-s-i):r/(s+i),s){case e:n=(t-a)/r+(t<a?6:0);break;case t:n=(a-e)/r+2;break;case a:n=(e-t)/r+4}n/=6}return[360*n,c,l]},h=function(e,t){var a=Object(l.a)(e,3),n=a[0],c=a[1],s=a[2],i=t.minH,r=t.maxH,o=t.minL,d=t.maxL,j=t.minS;return!(i<r&&(n<i||n>r))&&(!(i>r&&n>r&&n<i)&&(!(c<j)&&(!(s<o)&&!(s>d))))},b=function(e,t,a,n,c,s,i,l,r,d){console.log("analyze");for(var j={minH:c,maxH:s,minL:i,maxL:l,minS:r},b=e.getContext("2d"),O=n.current.getContext("2d"),x=b.getImageData(0,0,e.width,e.height),m=O.getImageData(0,0,e.width,e.height),v=x.width*x.height,g=0,f=0,p=0;p<v;p++){var N=4*p,C=x.data[N],y=x.data[N+1],w=x.data[N+2],S=(x.data[N+3],m.data[N+3]>10);S&&f++,!S&&h(u(C,y,w),j)?(g++,x.data[N]=255,x.data[N+1]=0,x.data[N+2]=0,x.data[N+3]=255):(x.data[N]=0,x.data[N+1]=0,x.data[N+2]=0,x.data[N+3]=150)}console.log(x);var k=a.current,T=k.getContext("2d");k.height=x.height,k.width=x.width,T.putImageData(x,0,0),d(!1),t({Width:e.width,Height:e.height,Pixels:v,Included:g,Excluded:f,"% all":o()(g/v*100,.01)+"%","% no exclude":o()(g/(v-f)*100,.01)+"%"})},O=function(e,t,a,c,s,i,l,r,o,d,u){var h=Object(n.useCallback)(j()(b,500),[]),O=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(console.log("effect"),!e)return!1;u(!0);var n=new FileReader;n.addEventListener("loadend",(function(e){console.log("loadend",e);var n=new Image;n.onload=function(){if(!n)return!1;var e=O.current,d=c.current,j=e.getContext("2d");e.height=n.height,e.width=n.width,d.height=n.height,d.width=n.width,d.getContext("2d").clearRect(0,0,n.width,n.height),j.clearRect(0,0,n.width,n.height),console.log(e),j.drawImage(n,0,0),h(e,t,a,c,s,i,l,r,o,u)},n.src=e.target.result})),n.readAsDataURL(e)}),[e,t,a]),Object(n.useEffect)((function(){if(!e)return!1;u(!0);var n=O.current;h(n,t,a,c,s,i,l,r,o,u)}),[t,a,s,i,l,r,o,d,u]),O},x=a(13),m=a(3),v=function(e){var t=e.data,a=e.isLoading;return Object(m.jsx)("div",{className:"imageDataViewer"+(a?" loading":""),children:a?Object(m.jsx)(x.c,{}):Object.entries(t).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(m.jsxs)("div",{className:"imageData",children:[Object(m.jsxs)("div",{className:"key",children:[a,":"]}),Object(m.jsx)("div",{className:"value",children:n})]},a)}))})},g=a(14),f=function(e){var t=e.Type,a=e.color,n=e.value,c=e.name,s=e.onChange,i=e.multiple;return Object(m.jsxs)("div",{className:"colorPicker",children:[Object(m.jsxs)("div",{className:"labelWrapper",children:[Object(m.jsx)("div",{className:"label",children:c}),Object(m.jsx)("div",{className:"value",children:o()(n,i)})]}),Object(m.jsx)(t,{color:a,onChange:function(e,t){return s(e.hsl)}})]})},p=function(e){var t=e.mode,a=e.setLastChange,c=e.xref,s=e.lineWidth,i=Object(n.useState)(null),r=Object(l.a)(i,2),o=r[0],d=r[1],j=c.current,u=Object(n.useCallback)((function(e){d({x:e.clientX,y:e.clientY})}),[d]),h=Object(n.useCallback)((function(e){if(1===e.buttons&&o){var n=j.getContext("2d"),c=j.getBoundingClientRect(),i=j.width/c.width,l=j.height/c.height,r={x:(e.clientX-c.left)*i,y:(e.clientY-c.top)*l},u={x:(o.x-c.left)*i,y:(o.y-c.top)*l};n.beginPath(),n.lineWidth=s,n.lineCap="round","PAINT"===t?(n.globalCompositeOperation="source-over",n.strokeStyle="black"):n.globalCompositeOperation="destination-out",n.moveTo(u.x,u.y),n.lineTo(r.x,r.y),n.stroke(),d({x:e.clientX,y:e.clientY}),a((new Date).getTime())}}),[o,j,s,a,t]);return Object(m.jsx)("canvas",{onMouseDown:u,onMouseMove:h,className:"overlay canvas",ref:c})};var N=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)("PAINT"),i=Object(l.a)(s,2),r=i[0],d=i[1],j=Object(n.useState)(!1),u=Object(l.a)(j,2),h=u[0],b=u[1],N=Object(n.useState)("NONE"),C=Object(l.a)(N,2),y=C[0],w=C[1],S=Object(n.useState)({h:0,s:0,l:0,a:.1}),k=Object(l.a)(S,2),T=k[0],E=k[1],D=Object(n.useState)({h:64,s:0,l:.2,a:1}),P=Object(l.a)(D,2),I=P[0],L=P[1],M=Object(n.useState)({h:0,s:0,l:0,a:.11}),R=Object(l.a)(M,2),W=R[0],A=R[1],H=Object(n.useState)({h:0,s:0,l:0,a:.85}),X=Object(l.a)(H,2),Y=X[0],B=X[1],J=Object(n.useState)({h:0,s:0,l:0,a:.23}),z=Object(l.a)(J,2),F=z[0],U=z[1],V=Object(n.useState)({h:122,s:0,l:.2,a:1}),Z=Object(l.a)(V,2),q=Z[0],G=Z[1],K=Object(n.useState)({}),Q=Object(l.a)(K,2),$=Q[0],_=Q[1],ee=Object(n.useRef)(null),te=Object(n.useRef)(null),ae=Object(n.useState)(0),ne=Object(l.a)(ae,2),ce=ne[0],se=ne[1],ie=O(a,_,ee,te,I.h,q.h,W.a,Y.a,F.a,ce,b),le=Object(n.useState)(!1),re=Object(l.a)(le,2),oe=re[0],de=re[1],je=function(e){e.dataTransfer.dropEffect="copy",e.preventDefault()};return Object(m.jsxs)("div",{className:"root",onDragEnter:function(){return de(!0)},children:[Object(m.jsxs)("div",{className:"topPart",children:[Object(m.jsxs)("div",{className:"xWrapper",children:[Object(m.jsx)("div",{onClick:function(){return w("NONE")},className:"xPart"+("NONE"===y?" selected":""),children:Object(m.jsx)(x.d,{})}),Object(m.jsx)("div",{onClick:function(){return w("INSPECT")},className:"xPart"+("INSPECT"===y?" selected":""),children:Object(m.jsx)(x.b,{})}),Object(m.jsx)("div",{onClick:function(){return d("PAINT")},className:"xPart"+("PAINT"===r?" selected":""),children:Object(m.jsx)(x.e,{})}),Object(m.jsx)("div",{onClick:function(){return d("ERASE")},className:"xPart"+("ERASE"===r?" selected":""),children:Object(m.jsx)(x.a,{})})]}),Object(m.jsxs)("div",{className:"settingsWrapper",children:[Object(m.jsx)(f,{Type:g.a,color:T,multiple:1,value:100*T.a,name:"Line width",onChange:E}),Object(m.jsx)(f,{Type:g.b,color:I,multiple:1,value:I.h,name:"Min Hue",onChange:L}),Object(m.jsx)(f,{Type:g.b,color:q,multiple:1,value:q.h,name:"Max Hue",onChange:G}),Object(m.jsx)(f,{Type:g.a,color:F,multiple:.01,value:F.a,name:"Min Saturation",onChange:U}),Object(m.jsx)(f,{Type:g.a,color:W,multiple:.01,value:W.a,name:"Min Luminosity",onChange:A}),Object(m.jsx)(f,{Type:g.a,color:Y,multiple:.01,value:Y.a,name:"Max Luminosity",onChange:B})]}),Object(m.jsx)(v,{isLoading:h,data:$})]}),Object(m.jsxs)("div",{className:"canvasWrapper",children:[Object(m.jsx)("div",{className:"canvas placeholder",children:Object(m.jsx)("div",{className:"placeholderText",children:"Drag image here"})}),Object(m.jsx)("canvas",{className:"canvas",ref:ie}),Object(m.jsx)("canvas",{style:{pointerEvents:"none",display:"INSPECT"===y?"block":"none"},className:"overlay canvas",ref:ee}),Object(m.jsx)(p,{mode:r,lineWidth:o()(100*T.a),setLastChange:se,xref:te})]}),Object(m.jsx)("div",{style:{display:oe?"block":"none"},className:"dropZone",onDragEnter:je,onDragOver:je,onDragLeave:function(){return de(!1)},onDrop:function(e){e.preventDefault(),de(!1),c(e.dataTransfer.files[0])}})]})};a(200);i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(N,{})}),document.getElementById("root"))}},[[201,1,2]]]);
//# sourceMappingURL=main.ed14de46.chunk.js.map