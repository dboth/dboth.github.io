{"version":3,"sources":["useCanvas.js","ImageDataViewer.js","ColorPicker.js","DrawCanvas.js","App.js","index.js"],"names":["rgbToHsl","r","g","b","h","s","max","Math","min","l","d","isIncluded","minH","maxH","minL","maxL","minS","analyzeImage","canvas","callback","liveCanvasRef","drawCanvasRef","setLoading","console","log","settings","ctx","getContext","drawctx","current","data","getImageData","width","height","drawData","pixels","included","excluded","i","base","painted","canvasLive","contextLive","putImageData","Width","Height","Pixels","Included","Excluded","round","useCanvas","imageX","setImageData","lastChange","debounceAnalyzeImage","useCallback","debounce","canvasRef","useRef","useEffect","reader","FileReader","addEventListener","arg","image","Image","onload","drawCanvas","context","clearRect","drawImage","src","target","result","readAsDataURL","ImageDataViewer","isLoading","className","Object","entries","map","a","ColorPicker","Type","color","value","name","onChange","multiple","c","e","hsl","DrawCanvas","mode","setLastChange","xref","lineWidth","useState","pos","setPos","mouseDown","x","clientX","y","clientY","mouseMove","buttons","rect","getBoundingClientRect","scaleX","scaleY","thisPos","left","top","lastPos","beginPath","lineCap","globalCompositeOperation","strokeStyle","moveTo","lineTo","stroke","Date","getTime","onMouseDown","onMouseMove","ref","App","setImage","setMode","viewMode","setViewMode","setLineWidth","color1","setColor1","luminosity1","setLuminosity1","luminosity2","setLuminosity2","saturation","setSaturation","color2","setColor2","imageData","dragVisible","setDragVisible","allowDrag","dataTransfer","dropEffect","preventDefault","onDragEnter","onClick","AlphaPicker","HuePicker","style","pointerEvents","display","onDragOver","onDragLeave","onDrop","files","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ed14de46.chunk.js","sourcesContent":["import { useRef, useEffect, useCallback } from \"react\";\nimport round from \"round\";\nimport debounce from \"lodash.debounce\";\n\nconst rgbToHsl = (r, g, b) => {\n  r = r / 255;\n  g = g / 255;\n  b = b / 255;\n\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    l = (max + min) / 2;\n\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n\n    h /= 6;\n  }\n\n  return [h * 360, s, l];\n};\n\nconst isIncluded = ([h, s, l], { minH, maxH, minL, maxL, minS }) => {\n  if (minH < maxH && (h < minH || h > maxH)) return false;\n  if (minH > maxH && h > maxH && h < minH) return false;\n  if (s < minS) return false;\n  if (l < minL) return false;\n  if (l > maxL) return false;\n  return true;\n};\n\n\n\nconst analyzeImage = (\n  canvas,\n  callback,\n  liveCanvasRef,\n  drawCanvasRef,\n  minH,\n  maxH,\n  minL,\n  maxL,\n  minS,\n  setLoading\n) => {\n  console.log(\"analyze\");\n  const settings = { minH, maxH, minL, maxL, minS };\n  const ctx = canvas.getContext(\"2d\");\n  const drawctx = drawCanvasRef.current.getContext(\"2d\");\n  const data = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  const drawData = drawctx.getImageData(0, 0, canvas.width, canvas.height);\n\n  const pixels = data.width * data.height;\n  let included = 0;\n  let excluded = 0;\n\n  for (let i = 0; i < pixels; i++) {\n    const base = i * 4;\n    const r = data.data[base];\n    const g = data.data[base + 1];\n    const b = data.data[base + 2];\n    const a = data.data[base + 3] / 255;\n\n    const painted = drawData.data[base+3] > 10;\n\n    if (painted)\n      excluded++;\n\n    if (!painted && isIncluded(rgbToHsl(r, g, b), settings)) {\n      included++;\n      data.data[base] = 255;\n      data.data[base + 1] = 0;\n      data.data[base + 2] = 0;\n      data.data[base + 3] = 255;\n    } else {\n      data.data[base] = 0;\n      data.data[base + 1] = 0;\n      data.data[base + 2] = 0;\n      data.data[base + 3] = 150;\n    }\n  }\n  console.log(data);\n  const canvasLive = liveCanvasRef.current;\n  const contextLive = canvasLive.getContext(\"2d\");\n  canvasLive.height = data.height;\n  canvasLive.width = data.width;\n  contextLive.putImageData(data, 0, 0);\n  setLoading(false);\n  callback({\n    Width: canvas.width,\n    Height: canvas.height,\n    Pixels: pixels,\n    Included: included,\n    Excluded: excluded,\n    \"% all\": round((included / pixels) * 100, 0.01) + \"%\",\n    \"% no exclude\": round((included / (pixels-excluded)) * 100, 0.01) + \"%\",\n  });\n};\n\nconst useCanvas = (\n  imageX,\n  setImageData,\n  liveCanvasRef,\n  drawCanvasRef,\n  minH,\n  maxH,\n  minL,\n  maxL,\n  minS,\n  lastChange,\n  setLoading\n) => {\n\n  const debounceAnalyzeImage = useCallback(debounce(analyzeImage, 500), []);\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    console.log(\"effect\");\n    if (!imageX) return false;\n    setLoading(true);\n    const reader = new FileReader();\n\n    reader.addEventListener(\"loadend\", (arg) => {\n      console.log(\"loadend\", arg);\n      const image = new Image();\n      image.onload = () => {\n        if (!image) return false;\n        const canvas = canvasRef.current;\n        const drawCanvas = drawCanvasRef.current;\n        const context = canvas.getContext(\"2d\");\n        canvas.height = image.height;\n        canvas.width = image.width;\n        drawCanvas.height = image.height;\n        drawCanvas.width = image.width;\n        drawCanvas.getContext(\"2d\").clearRect(0, 0, image.width, image.height);\n        context.clearRect(0, 0, image.width, image.height);\n        console.log(canvas);\n        context.drawImage(image, 0, 0);\n        debounceAnalyzeImage(\n          canvas,\n          setImageData,\n          liveCanvasRef,\n          drawCanvasRef,\n          minH,\n          maxH,\n          minL,\n          maxL,\n          minS,\n          setLoading\n        );\n      };\n      image.src = arg.target.result;\n    });\n\n    reader.readAsDataURL(imageX);\n  }, [imageX, setImageData, liveCanvasRef]);\n\n  useEffect(() => {\n    if (!imageX) return false;\n    setLoading(true);\n    const canvas = canvasRef.current;\n    debounceAnalyzeImage(\n      canvas,\n      setImageData,\n      liveCanvasRef,\n      drawCanvasRef,\n      minH,\n      maxH,\n      minL,\n      maxL,\n      minS,\n      setLoading\n    );\n  }, [setImageData, liveCanvasRef, minH, maxH, minL, maxL, minS, lastChange, setLoading]);\n\n  return canvasRef;\n};\n\nexport default useCanvas;\n","import React from \"react\";\nimport {FaHourglassHalf} from \"react-icons/fa\";\n\nconst ImageDataViewer = ({ data, isLoading }) => {\n\treturn (\n\t\t<div className={\"imageDataViewer\"+(isLoading ? \" loading\": \"\")}>\n\t\t\t{isLoading ? <FaHourglassHalf /> : Object.entries(data).map(([a, b]) => (\n\t\t\t\t<div key={a} className=\"imageData\"><div className=\"key\">{a}:</div><div className=\"value\">{b}</div></div>\n\t\t\t))}\n\t\t</div>\n\t);\n};\n\nexport default ImageDataViewer;\n","import React from \"react\";\nimport round from \"round\";\n\nconst ColorPicker = ({Type, color, value, name, onChange, multiple}) => <div className=\"colorPicker\">\n<div className=\"labelWrapper\"><div className=\"label\">{name}</div><div className=\"value\">{round(value,multiple)}</div></div>\n<Type color={color} onChange={(c, e) => onChange(c.hsl)} />\n</div>;\n\nexport default ColorPicker;","import React, { useState, useCallback } from \"react\";\n\nconst DrawCanvas = ({ mode, setLastChange, xref, lineWidth }) => {\n\tconst [pos, setPos] = useState(null);\n\n\tconst canvas = xref.current;\n\n\tconst mouseDown = useCallback(\n\t\t(e) => {\n\t\t\tsetPos({ x: e.clientX, y: e.clientY });\n\t\t},\n\t\t[setPos]\n\t);\n\n\tconst mouseMove = useCallback(\n\t\t(e) => {\n\t\t\tif (e.buttons !== 1) return;\n\t\t\tif (!pos) return;\n\t\t\tconst ctx = canvas.getContext(\"2d\");\n\t\t\tconst rect = canvas.getBoundingClientRect(); // abs. size of element\n\t\t\tconst scaleX = canvas.width / rect.width; // relationship bitmap vs. element for X\n\t\t\tconst scaleY = canvas.height / rect.height; // relationship bitmap vs. element for Y\n\t\t\tconst thisPos = {\n\t\t\t\tx: (e.clientX - rect.left) * scaleX, // scale mouse coordinates after they have\n\t\t\t\ty: (e.clientY - rect.top) * scaleY, // been adjusted to be relative to element\n\t\t\t};\n\t\t\tconst lastPos = {\n\t\t\t\tx: (pos.x - rect.left) * scaleX, // scale mouse coordinates after they have\n\t\t\t\ty: (pos.y - rect.top) * scaleY, // been adjusted to be relative to element\n\t\t\t};\n\t\t\tctx.beginPath(); // begin\n\n\t\t\tctx.lineWidth = lineWidth;\n\t\t\tctx.lineCap = \"round\";\n\n\t\t\tif(mode === \"PAINT\") {\n            ctx.globalCompositeOperation = 'source-over';\n            ctx.strokeStyle = 'black';\n            \n        } else {\n            ctx.globalCompositeOperation = 'destination-out';\n            \n        }\n\n\t\t\tctx.moveTo(lastPos.x, lastPos.y); // from\n\t\t\tctx.lineTo(thisPos.x, thisPos.y); // to\n\n\t\t\tctx.stroke(); // draw it!\n\t\t\tsetPos({ x: e.clientX, y: e.clientY });\n\t\t\tsetLastChange((new Date()).getTime());\n\t\t},\n\t\t[pos, canvas, lineWidth, setLastChange, mode]\n\t);\n\n\treturn (\n\t\t<canvas\n\t\t\tonMouseDown={mouseDown}\n\t\t\tonMouseMove={mouseMove}\n\t\t\tclassName=\"overlay canvas\"\n\t\t\tref={xref}\n\t\t/>\n\t);\n};\n\nexport default DrawCanvas;\n","import React, { useState, useRef } from \"react\";\nimport useCanvas from \"./useCanvas\";\nimport ImageDataViewer from \"./ImageDataViewer\";\nimport { HuePicker, AlphaPicker } from \"react-color\";\nimport ColorPicker from \"./ColorPicker\";\nimport round from \"round\";\nimport DrawCanvas from \"./DrawCanvas\";\nimport { FaImage, FaEye, FaPaintBrush, FaEraser } from \"react-icons/fa\";\n\nfunction App() {\n  const [image, setImage] = useState(null);\n  const [mode, setMode] = useState(\"PAINT\");\n  const [isLoading, setLoading] = useState(false);\n  const [viewMode, setViewMode] = useState(\"NONE\");\n  const [lineWidth, setLineWidth] = useState({\n    h: 0,\n    s: 0,\n    l: 0,\n    a: 0.1,\n  });\n  const [color1, setColor1] = useState({\n    h: 64,\n    s: 0,\n    l: 0.2,\n    a: 1,\n  });\n  const [luminosity1, setLuminosity1] = useState({\n    h: 0,\n    s: 0,\n    l: 0,\n    a: 0.11,\n  });\n  const [luminosity2, setLuminosity2] = useState({\n    h: 0,\n    s: 0,\n    l: 0,\n    a: 0.85,\n  });\n  const [saturation, setSaturation] = useState({\n    h: 0,\n    s: 0,\n    l: 0,\n    a: 0.23,\n  });\n  const [color2, setColor2] = useState({\n    h: 122,\n    s: 0,\n    l: 0.2,\n    a: 1,\n  });\n  const [imageData, setImageData] = useState({});\n\n  const liveCanvasRef = useRef(null);\n  const drawCanvasRef = useRef(null);\n\n  const [lastChange, setLastChange] = useState(0);\n\n  const canvasRef = useCanvas(\n    image,\n    setImageData,\n    liveCanvasRef,\n    drawCanvasRef,\n    color1.h,\n    color2.h,\n    luminosity1.a,\n    luminosity2.a,\n    saturation.a,\n    lastChange,\n    setLoading\n  );\n\n  const [dragVisible, setDragVisible] = useState(false);\n\n  const allowDrag = (e) => {\n    e.dataTransfer.dropEffect = \"copy\";\n    e.preventDefault();\n  };\n\n  const drop = (e) => {\n    e.preventDefault();\n    setDragVisible(false);\n    setImage(e.dataTransfer.files[0]);\n    //drop\n  };\n\n  return (\n    <div className=\"root\" onDragEnter={() => setDragVisible(true)}>\n      <div className=\"topPart\">\n        <div className=\"xWrapper\">\n          <div\n            onClick={() => setViewMode(\"NONE\")}\n            className={\"xPart\" + (viewMode === \"NONE\" ? \" selected\" : \"\")}\n          >\n            <FaImage />\n          </div>\n          <div\n            onClick={() => setViewMode(\"INSPECT\")}\n            className={\"xPart\" + (viewMode === \"INSPECT\" ? \" selected\" : \"\")}\n          >\n            <FaEye />\n          </div>\n          <div\n            onClick={() => setMode(\"PAINT\")}\n            className={\"xPart\" + (mode === \"PAINT\" ? \" selected\" : \"\")}\n          >\n            <FaPaintBrush />\n          </div>\n          <div\n            onClick={() => setMode(\"ERASE\")}\n            className={\"xPart\" + (mode === \"ERASE\" ? \" selected\" : \"\")}\n          >\n            <FaEraser />\n          </div>\n        </div>\n        <div className=\"settingsWrapper\">\n          <ColorPicker\n            Type={AlphaPicker}\n            color={lineWidth}\n            multiple={1}\n            value={lineWidth.a * 100}\n            name=\"Line width\"\n            onChange={setLineWidth}\n          />\n          <ColorPicker\n            Type={HuePicker}\n            color={color1}\n            multiple={1}\n            value={color1.h}\n            name=\"Min Hue\"\n            onChange={setColor1}\n          />\n          <ColorPicker\n            Type={HuePicker}\n            color={color2}\n            multiple={1}\n            value={color2.h}\n            name=\"Max Hue\"\n            onChange={setColor2}\n          />\n          <ColorPicker\n            Type={AlphaPicker}\n            color={saturation}\n            multiple={0.01}\n            value={saturation.a}\n            name=\"Min Saturation\"\n            onChange={setSaturation}\n          />\n          <ColorPicker\n            Type={AlphaPicker}\n            color={luminosity1}\n            multiple={0.01}\n            value={luminosity1.a}\n            name=\"Min Luminosity\"\n            onChange={setLuminosity1}\n          />\n          <ColorPicker\n            Type={AlphaPicker}\n            color={luminosity2}\n            multiple={0.01}\n            value={luminosity2.a}\n            name=\"Max Luminosity\"\n            onChange={setLuminosity2}\n          />\n        </div>\n        <ImageDataViewer isLoading={isLoading} data={imageData} />\n      </div>\n      <div className=\"canvasWrapper\">\n        <div className=\"canvas placeholder\">\n          <div className=\"placeholderText\">Drag image here</div>\n        </div>\n        <canvas className=\"canvas\" ref={canvasRef} />\n        <canvas\n          style={{\n            pointerEvents: \"none\",\n            display: viewMode === \"INSPECT\" ? \"block\" : \"none\",\n          }}\n          className=\"overlay canvas\"\n          ref={liveCanvasRef}\n        />\n        <DrawCanvas\n          mode={mode}\n          lineWidth={round(lineWidth.a * 100)}\n          setLastChange={setLastChange}\n          xref={drawCanvasRef}\n        />\n      </div>\n      <div\n        style={{ display: dragVisible ? \"block\" : \"none\" }}\n        className=\"dropZone\"\n        onDragEnter={allowDrag}\n        onDragOver={allowDrag}\n        onDragLeave={() => setDragVisible(false)}\n        onDrop={drop}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}